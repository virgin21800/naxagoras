"function"!=typeof window.n2SSIframeLoader&&(void 0===window.jQuery&&void 0!==window.parent&&(window.jQuery=window.parent.jQuery),function(l){var i=[],t=window.addEventListener?"addEventListener":"attachEvent";function e(t,e){this.i=e,this.frame=t,this.$frame=l(t)}window[t]("attachEvent"===t?"onmessage":"message",function(t){for(var e=0;e<i.length;e++)i[e]&&i[e].match(t.source)&&i[e].message(t[t.message?"message":"data"])}),e.prototype.match=function(t){return t===(this.frame.contentWindow||this.frame.contentDocument)&&(this.frameContent=this.frame.contentWindow||this.frame.contentDocument,!0)},e.prototype.message=function(t){switch(t.key){case"setLocation":"function"==typeof window.zajax_goto?window.zajax_goto(t.location):window.location=t.location;break;case"ready":var e=this.getClientHeight();this.frameContent.postMessage({key:"ackReady",clientHeight:e},"*");break;case"resize":if(t.fullPage?this.fullpage!==t.fullPage&&(this.fullpage=t.fullPage,this.verticalOffsetSelectors=l(t.verticalOffsetSelectors),this.resizeFullPage(),l(window).on("resize.n2-ss-iframe-"+this.i,l.proxy(this.resizeFullPage,this)),l(window).on("orientationchange.n2-ss-iframe-"+this.i,l.proxy(this.resizeFullPage,this))):this.fullpage=0,this.$frame.css({height:t.height}),t.forceFull&&this.forcefull!==t.forceFull)this.forcefull=t.forceFull,l("body").css("overflow-x","hidden"),this.resizeFullWidth(),l(window).on("resize.n2-ss-iframe-"+this.i,l.proxy(this.resizeFullWidth,this))}},e.prototype.exists=function(){return!!l.contains(document.body,this.frame)||(i[this.i]=!1,l(window).off(".n2-ss-iframe-"+this.i),!1)},e.prototype.resizeFullWidth=function(t){if(this.exists()){var e=0,i=0,n=l(".editor-writing-flow,.fl-responsive-preview .fl-builder-content");n.length&&(e=n.width(),i=n.offset().left);var o,s=0<e?e:document.body.clientWidth||document.documentElement.clientWidth,a=this.$frame.parent(),r=a[0].getBoundingClientRect(),h="rtl"===l("html").attr("dir");o=h?s-(r.left+a.outerWidth()):r.left,this.$frame.css(h?"marginRight":"marginLeft",-o-parseInt(a.css("paddingLeft"))-parseInt(a.css("borderLeftWidth"))+i).css("maxWidth","none").width(s)}},e.prototype.resizeFullPage=function(t){if(this.exists()){for(var e=this.getClientHeight(t),i=0;i<this.verticalOffsetSelectors.length;i++)e-=this.verticalOffsetSelectors.eq(i).outerHeight();this.frameContent.postMessage({key:"update",clientHeight:e},"*"),this.$frame.height(e)}},e.prototype.getClientHeight=function(t){var e=window.document,i=0;try{window.parent&&window.parent!==window&&(e=window.parent.document)}catch(t){}if(window.matchMedia&&/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||window.opera)){var n,o=!1,s=this.lastOrientation;t&&"orientationchange"===t.type&&(o=!0),n=/iPad|iPhone|iPod/.test(navigator.platform)?e.documentElement.clientHeight:window.innerHeight,window.matchMedia("(orientation: landscape)").matches?(i=Math.min(screen.width,n),90!==s&&(o=!0,this.lastOrientation=90)):(i=Math.min(screen.height,n),0!==s&&(o=!0,this.lastOrientation=0)),!o&&Math.abs(i-this.lastClientHeight)<100?i=this.lastClientHeight:this.lastClientHeight=i}else i=e.documentElement.clientHeight||e.body.clientHeight;return i},window.n2SSIframeLoader=function(t){i.push(new e(t,i.length))}}(window.jQuery));